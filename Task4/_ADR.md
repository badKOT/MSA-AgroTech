# ADR-003: Общий ревью

**Статус:** ⚠️ На рассмотрении
**Участники:** Все decision-мейкеры
**Дата:** 2025-08-10

---

## Central-AI

Оценка - по 5-бальной шкале. Чем больше, тем лучше.

| Критерий | Оценка | Комментарий |
|----------|--------|-------------|
| Автономность при полном обрыве связи | 2 | Мониторинг видео в реальном времени будет невозможен, останется только мониторинг кормов и фильтрации воды. Данные кэшируются, но кэш не рассчитан на долгосрочное отключение связи. |
| Задержка «событие → действие» | 3 | При хорошем интернете: видео отправляется через gRPC-стрим, достаточно быстро. Возможны задержки при отправке данных из AI-кластера и IoT-шлюза в аналитическую систему платформы. |
| Стоимость владения (TCO) на 150 ферм | 3 | Капитальные затраты в фермы низкие. При этом нужно развернуть AI-кластер: GPU-сервер может стоить до 5 раз дороже, чем набор для 1 фермы. Операционные... выше? Охлаждение, электричество, каналы связи. Звучит дорого. |
| Отказоустойчивость и SLA | 2 | Необходимы резервные каналы связи, процедуры аварийного переключения, потому что локального AI-инференса нет. Нужны дополнительные меры в центральном кластере на случай высокой нагрузки. |
| Безопасность данных и устройств | 4 | Больше физической безопасности в централизованном сервере. Шифрование потоков легко реализуемо. При этом обмен данными между фермой и цифровой платформой значительный. |
| Масштабируемость | 4 | Переиспользование IoT-шлюза и аналитической платформы: нужно больше информации о возможности горизонтального масштабирования, может потребоваться перепроектирование. AI-кластер: централизованный, легко реализовать как горизонтальное, так и вертикальное масштабирование. При этом могут быть скачки нагрузки при восстановлении связи с фермами. Потребуется возможность горячего добавления нод в кластер или хостинг избыточного числа контейнеров с моделями на случай скачков. |
| Сложность CI/CD и эксплуатации | 5 | Мониторинг кластера вместо сотен разных Raspberry Pi |

## Edge-AI

| Критерий | Оценка | Комментарий |
|----------|--------|-------------|
| Автономность при полном обрыве связи | 5 | Все продолжает работать. Синхронизатор отправляет метрики при подключении к сети. |
| Задержка «событие → действие» | 4 | Отсутствуют все задержки, вызванные транспортом. Локальные кластеры ограничены в ресурсах, это может приводить к более медленной или менее качественной работе AI-модели. |
| Стоимость владения (TCO) на 150 ферм | 4 | Капитальные траты в платформу минимальные. На каждую ферму - полный комплект оборудования (дешевле, чем один сервер в AI-кластере). Операционные траты ниже, потому что требуется меньше охлаждения, а надежные каналы связи - только в рамках одной фермы. Звучит проще, чем соединить все фермы с центральным сервером. |
| Отказоустойчивость и SLA | 3 | Мониторинг сложнее, чем у центрального сервера. Если сломается оборудование - оно сломается на далеко стоящей ферме. MTTR растет. При этом организовать fallback-решения в рамках одной фермы проще. |
| Безопасность данных и устройств | 3 | Физический доступ проще. При этом фермы гораздо меньше зависят от центрального сервера, передают и получают меньше данных. Чем меньше передаем, тем меньше могут украсть. |
| Масштабируемость | 4 | Для новой фермы нужно лишь закупить стандартный набор оборудования, если только все фермы примерно одинаковы. При увеличении нагрузки (увеличение количества камер, или датчиков еды/воды) осуществить горизонтальное масштабирование в рамках одной фермы сложно. Вертикальное проще, но потребует не-типового оборудования. |
| Сложность CI/CD и эксплуатации | 2 | Синхронизатор можно переиспользовать в том числе для обновления OTA, однако это все еще дополнительный шаг в пайплайне. Мониторинг значительно усложняется. |

Я рекомендую Edge-AI. Это потребует минимальных изменений в существующей платформе, и позволит почти полностью изолировать каждую ферму. Однако потребуется более сложный CI/CD-процесс, будут затруднены мониторинг и ремонт оборудования на фермах.